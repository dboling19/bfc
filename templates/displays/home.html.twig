{% extends 'base.html.twig' %}

{% block title %}Home{% endblock %}

{% block body %}
  {{ include("navbar.html.twig") }}

  <div style="max-width:60%">
    <div class="db-threequarter db-left db-max-large">
      <table class="db-table">
        <tr>
          <th style="padding-left:8px">File Name</th>
          <th>Date Modified</th>
          <th>Filesize</th>
        </tr>
        {% for result in results %}
          <tr>
            <td style="padding-left:8px"><a href="{{ path('home', {id: result.id}) }}">{{ result.name }}</a></td>
            <td>
              {% if result.dateModified is defined %}
                {{ result.dateModified|format_datetime('medium', 'short') }}
              {% endif %}
            </td>
            <td>
              {% if result.size is defined %}
                {{ result.size }}
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </table>
    </div>
    <div class="db-container db-quarter db-left db-max-small">
      {% if entity is not empty %}
        <p class="db-border db-panel db-info">
          <b>Details</b>
          <br>
          {{ entity.name }}
          <br>
          {{ entity.size }}
          <br>
          {{ entity.dateModified|format_datetime('short', 'short') }}
          <br>
          <button type="button" class="db-button" name="download_file" onclick="window.location.href='{{ path('download', {id: entity.id}) }}'">Download</a>
          <br>
          <button type="button" class="db-button" name="trash_file" onclick="trash_file({{ entity.id }})">Trash File</button>
        </p>
      {% endif %}
    </div>
  </div>


  <script>
    function trash_file(entity_id) {
      result = window.confirm("Really trash file?\nFile will be moved to TRASH");
      if (result === true) {
        const route = "{{ path('trash_file', {file_id: 'file_id_value'})|escape('js') }}".replace('file_id_value', file_id);
        window.location.replace(route);
      }
    }

  </script>

{% endblock %}
