{% block body %}
{% set route_name = app.request.attributes.get('_route')%}
<div class="">
  {% if entity is not empty %}
      <button type="button" class="db-button" name="download_file" onclick="window.location.href='{{ path('download', {id: entity.id}) }}'" style="margin-left:6px">Download</button>
      {% if route_name == 'trash_display' %}
        {% if entity.path is defined %}
          <button type="button" class="db-button" name="delete_entity" onclick="delete_entity({{ entity.id }}, 'dir')">Delete</button>
          <button type="button" class="db-button" name="cd" onclick="window.location.href='{{ path('chdir', {id: entity.id}) }}'">Open</button>
        {% else %}
          <button type="button" class="db-button" name="delete_entity" onclick="delete_entity({{ entity.id }}, 'file')">Delete</button>
        {% endif %}
      {% else %}
        {% if entity.path is defined %}
          <button type="button" class="db-button" name="trash_entity" onclick="trash_entity({{ entity.id }}, 'dir')">Trash</button>
          <button type="button" class="db-button" name="cd" onclick="window.location.href='{{ path('chdir', {id: entity.id}) }}'">Open</button>
        {% else %}
          <button type="button" class="db-button" name="trash_entity" onclick="trash_entity({{ entity.id }}, 'file')">Trash</button>
        {% endif %}
      {% endif %}
  {% endif %}
</div>


<script>
  function trash_entity(entity_id, type) {
    if (type == 'dir')
    {
      result = window.confirm("Really trash folder?\nFolder and contents will be moved to TRASH");
      if (result === true) {
        const route = "{{ path('trash_entity', {entity_id: 'entity_id_value', type: 'dir'})|escape('js') }}".replace('entity_id_value', entity_id);
        window.location.replace(route);
      }
    } else {
      result = window.confirm("Really trash file?\nFile will be moved to TRASH");
      if (result === true) {
        const route = "{{ path('trash_entity', {entity_id: 'entity_id_value', type: 'file'})|escape('js') }}".replace('entity_id_value', entity_id);
        window.location.replace(route);
      }
    }
  }

  function delete_entity(entity_id, type) {
    if (type == 'dir')
    {
      result = window.confirm("Really DELETE folder?\nFolder, contents and related data will be DELETED PERMANENTLY");
      if (result === true) {
        const route = "{{ path('delete_entity', {entity_id: 'entity_id_value', type: 'dir'})|escape('js') }}".replace('entity_id_value', entity_id);
        window.location.replace(route);
      }
    } else {
      result = window.confirm("Really DELETE file?\File and related data will be DELETED PERMANENTLY");
      if (result === true) {
        const route = "{{ path('delete_entity', {entity_id: 'entity_id_value', type: 'file'})|escape('js') }}".replace('entity_id_value', entity_id);
        window.location.replace(route);
      }
    }
  }

</script>
{% endblock %}