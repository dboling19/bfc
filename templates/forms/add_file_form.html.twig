{% block body %}
<div class="db-form-popup db-quarter db-panel db-border" id="add-item-form" hidden style="max-width:300px; min-width:300px">
  <form action="{{ path('file_upload') }}" method="POST" class="db-border db-panel" enctype="multipart/form-data">
    <p>
      <label for="name">Filename</label>
      <br>
      <input type="text" name="name" class="db-input"/>
    </p>
    <p>
      <label for="tag">Tags</label>
      <br>
      <input type="text" name="tag" class="db-input"/>
    </p>
    <p>
      <label for="file" class="db-button">Select File</label>
      <input type="file" name="file[]" id="file" required hidden multiple/>
      <br id="file_list_break" hidden>
      <span id="file-chosen">No File Chosen</span>
    </p>
    <p>
      <button type="submit" class="db-button">Upload File</button>
    </p>
  </form>
</div>

<script>
  function toggle_add_file_form() {
    item_form = document.getElementById('add-item-form');
    if (item_form.style.display == 'block') {
      item_form.style.display = 'none';
    } else {
      item_form.style.display = 'block';
    }
  }

  const actual_btn = document.getElementById('file');
  const file_chosen = document.getElementById('file-chosen');
  actual_btn.addEventListener('change', function(){
    file_names = [];
    for (let file of this.files) {
      file_names.push(file.name);
    }
    if (file_names.length > 0)
    {
      file_chosen.style.display = 'none';
      document.getElementById('file_list_break').style.display = 'block';
      let file_list = document.getElementById('file-chosen');
      for (let file of file_names) {
        let file_name = document.createElement("p");
        file_name.innerText = file;
        file_list_break.after(file_name);
      }
    }
  });
</script>

{% endblock %}